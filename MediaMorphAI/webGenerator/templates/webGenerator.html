{% extends 'generateWebLayout.html' %}
{% load static %}
{% block title %} Inspyr AI | Generate Website {% endblock %}
{% block content %}
<div class="container">
    <p class="greet">Welcome, {{user}}</p>
    <div class="subContainer">
        <a href="/accounts/logout" class="logoutBtn">Logout</a>
    </div>
</div>
<div class="main-container fade-in" id="main-container">
    <form method="POST" onsubmit="return false;" class="qnaform">
        {% csrf_token %}
        <label class="question" id="question">Loading... {{ question }}</label>
        <div class="formcontainer">
            <input type="text" class="answer" name="answer" placeholder="Enter the response here" id="responseText"
                required>
            <button class="quesBtn" type="submit" id="continue-btn">Continue <i
                    class="fa-solid fa-arrow-right arrow"></i></button>
        </div>
    </form>
    <form id="final-form" method="POST" action="{% url 'preview' %}">
        {% csrf_token %}
        <input type="hidden" name="responses" id="responses">
    </form>


</div>
<div class="loading-container hidden" id="loading-container">
    <div class="ani-container" id="ani-container">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>

        <div class="blur-layer"></div>

        <div id="text" class="text">Magic is happening</div>
    </div>
</div>
<footer class="footer">
    <p>Inspyr AI | Developed by
        <a href="mailto:msharan.hnp@gmail.com" class="DevInfo">Sharan</a>
        • <a href="mailto:rohanms0405@gmail.com" class="DevInfo">Rohan</a>
        • <a href="mailto:24ranjith2003@gmail.com" class="DevInfo">Ranjith</a>
        • <a href="mailto:shivamv1972@gmail.com" class="DevInfo">Vishnu</a>
    </p>
    <div>
        <a href="/generateimage" class="footernav">Generate Image</a>
        <a href="/generateweb" class="footernav">Generate Web</a>
        {% if user.is_authenticated and user.is_superuser %}
        <a href="/feedbacks" class="footernav">Feedbacks</a>
        {% endif %}
    </div>
</footer>
<script src="https://kit.fontawesome.com/b2b6d427ae.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    let flag = 0;
    let quest = document.getElementById('question');
    let questions = [
        'What is the primary purpose of the website?',
        'What sections do you want on the landing page (e.g., home, about, services, contact)?',
        'Do you have a preferred color scheme or branding guidelines for the website?',
        'What type of layout do you prefer: centered, full-width, or a mix of both?',
        'What kind of navigation menu do you want: horizontal, vertical, or a hamburger menu?',
        'Will you need a logo or placeholder for the logo?',
        'What kind of fonts do you prefer, or do you want to use default web fonts?',
        'Do you want any specific animations or transitions (e.g., fade in, slide up, etc.)?',
        'What are the specific features or elements you want to be animated?',
        'Do you need any social media links or icons? If yes, please provide the details.',
        'Should there be any specific call-to-action buttons? If so, what should they say?',
        'Do you require any specific responsiveness features, such as mobile view adjustments or tablet view designs?',
        'For the "Contact" section, what form fields do you need (e.g., name, email, message)?',
        'Should the contact form have any specific validation rules (e.g., required fields, email format)?',
        'Do you have any additional requirements or features you want to include on the landing page? If so, provide details.'
    ];

    let responses = [];
    let currentQuestionIndex = 0;

    const questionText = document.getElementById('question');
    const responseInput = document.getElementById('responseText');
    const continueButton = document.getElementById('continue-btn');
    const hiddenResponsesInput = document.getElementById('responses');
    const mainContent = document.getElementById('main-container');
    const loadingAnimation = document.getElementById('loading-container');

    questionText.textContent = questions[currentQuestionIndex];

    continueButton.addEventListener('click', function () {
        const userResponse = responseInput.value;

        if (userResponse.trim() === "") {
            alert("Please provide an answer.");
            return;
        }
        responses.push({
            question: questions[currentQuestionIndex],
            answer: userResponse
        });

        responseInput.value = '';

        currentQuestionIndex++;

        if (currentQuestionIndex < questions.length) {
            questionText.textContent = questions[currentQuestionIndex];
        } else {
            flag = 1;
            hiddenResponsesInput.value = JSON.stringify(responses);
            mainContent.classList.add('hidden');
            loadingAnimation.classList.add('visible');
            document.getElementById('final-form').submit();
        }
    });
    const texts = [
        "Magic is happening",
        "Collecting fonts",
        "Applying styles",
        "Adding animations",
        "Almost Done"
    ];

    let index = 0;
    const textElement = document.getElementById('text');

    function changeText() {
        textElement.classList.remove('show');
        setTimeout(() => {
            textElement.innerText = texts[index];
            textElement.classList.add('show');
            index = (index + 1) % texts.length;
        }, 500);
    }

    setInterval(changeText, 3000);
</script>
{% endblock %}